<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="style.css" type="text/css" media="all"/>
  <title>LUA_CALL(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LUA_CALL(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">LUA_CALL(3)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm" title="Nm">lua_call</code> &#x2014;
<div class="Nd" title="Nd">calls a function</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In" title="In">#include
  &lt;<a class="In" title="In">lua.h</a>&gt;</code>
<div class="Pp"></div>
<var class="Ft" title="Ft">void</var>
<br/>
<code class="Fn" title="Fn">lua_call</code>(<var class="Fa" title="Fa" style="white-space: nowrap;">lua_State
  *L</var>, <var class="Fa" title="Fa" style="white-space: nowrap;">int
  nargs</var>, <var class="Fa" title="Fa" style="white-space: nowrap;">int
  nresults</var>);
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Fn" title="Fn">lua_call</code>() calls a function.
<div class="Pp"></div>
To call a function you must use the following protocol: first, the function to
  be called is pushed onto the stack; then, the arguments to the function are
  pushed in direct order; that is, the first argument is pushed first. Finally
  you call <code class="Nm" title="Nm">lua_call</code>;
  <var class="Fa" title="Fa">nargs</var> is the number of arguments that you
  pushed onto the stack. All arguments and the function value are popped from
  the stack when the function is called. The function results are pushed onto
  the stack when the function returns. The number of results is adjusted to
  nresults, unless nresults is <code class="Dv" title="Dv">LUA_MULTRET</code>.
  In this case, all results from the function are pushed. Lua takes care that
  the returned values fit into the stack space. The function results are pushed
  onto the stack in direct order (the first result is pushed first), so that
  after the call the last result is on the top of the stack.
<div class="Pp"></div>
Any error inside the called function is propagated upwards (with a longjmp).
<div class="Pp"></div>
The following example shows how the host program can do the equivalent to this
  Lua code:
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
a = f(&quot;how&quot;, t.x, 14)
</pre>
</div>
<div class="Pp"></div>
Here it is in C:
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
lua_getfield(L, LUA_GLOBALSINDEX, &quot;f&quot;); /* function to be called */ 
lua_pushstring(L, &quot;how&quot;);                        /* 1st argument */ 
lua_getfield(L, LUA_GLOBALSINDEX, &quot;t&quot;);   /* table to be indexed */ 
lua_getfield(L, -1, &quot;x&quot;);        /* push result of t.x (2nd arg) */ 
lua_remove(L, -2);                  /* remove 't' from the stack */ 
lua_pushinteger(L, 14);                          /* 3rd argument */ 
lua_call(L, 3, 1);     /* call 'f' with 3 arguments and 1 result */ 
lua_setfield(L, LUA_GLOBALSINDEX, &quot;a&quot;);        /* set global 'a' */
</pre>
</div>
<div class="Pp"></div>
Note that the code above is &quot;balanced&quot;: at its end, the stack is back
  to its original configuration. This is considered good programming practice.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<cite class="Rs" title="Rs"><span class="RsA">Roberto Ierusalimschy</span>,
  <span class="RsA">Luiz Henrique de Figueiredo</span>, and
  <span class="RsA">Waldemar Celes</span>, <span class="RsT">Lua 5.1 Reference
  Manual</span>.</cite>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Fn" title="Fn">lua_call</code>() manual page was written by
  Sergey Bronnikov.</div>
<table class="foot">
  <tr>
    <td class="foot-date">July 19, 2022</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</body>
</html>
